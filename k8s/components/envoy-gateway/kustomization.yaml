apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

helmCharts:
  - name: gateway-helm
    repo: oci://docker.io/envoyproxy
    version: v1.6.0
    namespace: envoy-gateway-system

resources:
  - namespace.yaml
  - gateway-class.yaml
  - gateway.yaml
  - envoy-proxy.yaml
  - http-route.yaml

# CRDs are installed in the crds component; remove them from this chart output
patches:
  - target:
      kind: CustomResourceDefinition
    patch: |-
      apiVersion: apiextensions.k8s.io/v1
      kind: CustomResourceDefinition
      metadata:
        name: UNUSED
      $patch: delete
